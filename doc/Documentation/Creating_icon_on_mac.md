# How to create an `.icns` macOS app icon and use it on a QT project

> How to make an application icon for macOS using `iconset` & `iconutil` and use the resulting .icns with a macOS application

## Steps

- [Saving images](#saving-images)
- [Creating an `.iconset`](#creating-an-iconset)
- [Converting to `.icns`](#converting-to-icns)
- [Using the .icns on a Qt Projet](#using-the-icns-on-a-qt-projet)

## Saving images

Save your app icon with the following names & dimensions:

| Name | Dimensions |
| ---- | ---------- |
| `icon_16x16.png` | `16x16` |
| `icon_16x16@2x.png` | `32x32` |
| `icon_32x32.png` | `32x32` |
| `icon_32x32@2x.png` | `64x64` |
| `icon_128x128.png` | `128x128` |
| `icon_128x128@2x.png` | `256x256` |
| `icon_256x256.png` | `256x256` |
| `icon_256x256@2x.png` | `512x512` |
| `icon_512x512.png` | `512x512` |
| `icon_512x512@2x.png` | `1024x1024` |

## Creating an `.iconset`

1. Move all of the images into a new folder
2. Rename the folder to: `icon.iconset`
3. Confirm the file extension when prompted

This will convert the folder of images into an iconset, this can be verified by quick looking with the spacebar - a resizable preview of your icon should now appear.

## Converting to `.icns`

1. Navigate to the directory containing your `icon.iconset` in the terminal
2. Run `iconutil` with the following command: `iconutil -c icns icon.iconset`
3. Your `icon.icns` will be generated in the current directory

## Using the `.icns` on a Qt Projet

To configure the application's icon, the Info.plist file generated by CMake must contain the icon information. This can be achieved by setting the `.icns` file name to the MACOSX_BUNDLE_ICON_FILE variable.


```cmake
# The MACOSX_BUNDLE_ICON_FILE variable is added to the Info.plist
# generated by CMake. This variable contains the .icns file name,
# without the path.
set(MACOSX_BUNDLE_ICON_FILE photosurface.icns)

# And the following tells CMake where to find and install the file itself.
set(app_icon_macos "${CMAKE_CURRENT_SOURCE_DIR}/resources/photosurface.icns")
set_source_files_properties(${app_icon_macos} PROPERTIES MACOSX_PACKAGE_LOCATION "Resources")

qt_add_executable(photosurfaceexample MACOSX_BUNDLE main.cpp ${app_icon_macos})
```

Notice that the first set command defines the MACOSX_BUNDLE_ICON_FILE variable, which is required to add the icon file to the Info.plist file. The second set command defines the app_icon_macos variable with the absolute path to the icon file. This variable is then used to configure MACOSX_PACKAGE_LOCATION, which defines the icon file's install location. Finally, the add_executable uses the app_icon_macOS variable to set the application's icon.

More info: [https://doc.qt.io/qt-6/appicon.html](https://doc.qt.io/qt-6/appicon.html)